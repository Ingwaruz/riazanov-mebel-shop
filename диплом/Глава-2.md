# Глава 2. Анализ и проектирование интернет-витрины мебельного магазина «Дому мебель»

## 2.1. Анализ предметной области и существующих решений

### 2.1.1. Особенности рынка мебельной индустрии

Рынок мебельной индустрии характеризуется высокой конкуренцией и постоянно растущими требованиями потребителей к качеству, функциональности и внешнему виду продукции. Современные покупатели уделяют особое внимание следующим аспектам:

- Возможность детального ознакомления с товаром до покупки
- Удобство выбора и сравнения различных моделей
- Наличие полной информации о материалах, размерах и других характеристиках
- Прозрачность ценообразования и доступность информации о скидках
- Возможность заказа товара онлайн без посещения физического магазина

Эти требования определяют необходимость создания современной интернет-витрины, которая позволит потенциальным покупателям получить максимально полное представление о предлагаемых товарах.

### 2.1.2. Анализ существующих решений мебельных интернет-магазинов

В рамках анализа были рассмотрены существующие решения интернет-магазинов мебели, представленных на российском рынке:

**Таблица 2.1.** Сравнение существующих решений интернет-магазинов мебели

| Критерий | IKEA | Hoff | Аскона | Лазурит |
|----------|------|------|--------|---------|
| Наличие фильтрации по категориям | + | + | + | + |
| Наличие сортировки товаров | + | + | + | + |
| Детальное описание товаров | + | + | ± | + |
| Возможность онлайн-заказа | + | + | + | + |
| Адаптивность дизайна | + | + | ± | ± |
| Скорость загрузки страниц | Высокая | Средняя | Средняя | Низкая |
| Интуитивно понятный интерфейс | + | + | ± | ± |
| Интеграция с CRM-системами | + | + | ? | ? |

Анализ показал, что ведущие интернет-магазины мебели предлагают схожий набор функциональности, но различаются по качеству реализации и удобству использования.

### 2.1.3. Выявление проблем и потребностей мебельного магазина «Дому мебель»

На основе проведенного анализа деятельности мебельного магазина «Дому мебель» были выявлены следующие проблемы:

1. Отсутствие единой системы представления товаров в онлайн-формате
2. Сложности с актуализацией информации о наличии и характеристиках товаров
3. Ограниченные возможности для расширения клиентской базы без интернет-представительства
4. Трудности в анализе покупательского спроса и предпочтений
5. Неэффективность процесса обработки заказов при увеличении их объема

Основные потребности магазина:
- Создание современной интернет-витрины с удобным каталогом товаров
- Возможность гибкого управления ассортиментом и ценами
- Инструменты для привлечения новых клиентов и удержания существующих
- Автоматизация процесса обработки заказов
- Получение аналитических данных о посетителях и их предпочтениях

## 2.2. Проектирование архитектуры системы

### 2.2.1. Выбор архитектурного подхода

Для реализации интернет-витрины мебельного магазина «Дому мебель» был выбран микросервисный архитектурный подход. Данный выбор обусловлен следующими преимуществами:

1. **Масштабируемость** — возможность независимого масштабирования отдельных компонентов системы при росте нагрузки
2. **Отказоустойчивость** — сбои в работе одного сервиса не приводят к отказу всей системы
3. **Гибкость развития** — возможность независимой разработки, тестирования и развертывания отдельных компонентов
4. **Технологическая независимость** — возможность использования различных технологий для разных сервисов в зависимости от их специфики

Принципиальная схема микросервисной архитектуры интернет-витрины представлена на рисунке 2.1.

### 2.2.2. Компонентная модель системы

Интернет-витрина мебельного магазина «Дому мебель» включает следующие основные компоненты:

1. **Клиентское приложение (Frontend)** — интерфейс пользователя, реализованный как SPA-приложение на базе React
2. **API Gateway** — единая точка входа для всех клиентских запросов, обеспечивающая маршрутизацию, аутентификацию и авторизацию
3. **Микросервисы:**
   - Сервис каталога товаров
   - Сервис управления корзиной
   - Сервис обработки заказов
   - Сервис управления пользователями и аутентификации
   - Сервис аналитики и статистики

4. **Хранилища данных:**
   - База данных товаров и категорий
   - База данных пользователей
   - База данных заказов
   - Хранилище медиафайлов (изображения товаров)

5. **Внешние интеграции:**
   - Платежные системы
   - Системы доставки
   - CRM-система магазина

Взаимодействие компонентов системы осуществляется через REST API, что обеспечивает гибкость и масштабируемость решения.

### 2.2.3. Проектирование базы данных

Структура базы данных интернет-витрины включает следующие основные сущности:

**Таблица 2.2.** Основные сущности базы данных

| Сущность | Описание | Основные атрибуты |
|----------|----------|-------------------|
| Product | Товар | id, name, description, price, discount_price, category_id, brand, dimensions, material, color, stock, created_at, updated_at |
| Category | Категория товаров | id, name, parent_id, description, image_url |
| User | Пользователь | id, email, password_hash, first_name, last_name, phone, role, created_at |
| Order | Заказ | id, user_id, status, total_price, shipping_address, payment_method, created_at, updated_at |
| OrderItem | Позиция заказа | id, order_id, product_id, quantity, price, discount_price |
| CartItem | Позиция корзины | id, session_id, product_id, quantity, added_at |
| ProductImage | Изображение товара | id, product_id, url, is_main, sort_order |

ER-диаграмма базы данных представлена на рисунке 2.2.

### 2.2.4. Проектирование пользовательского интерфейса

При проектировании пользовательского интерфейса интернет-витрины были учтены основные принципы UX/UI дизайна:

1. **Простота и интуитивность** — интерфейс должен быть понятен пользователям с различным уровнем компьютерной грамотности
2. **Адаптивность** — корректное отображение на устройствах с различным размером экрана
3. **Доступность** — соответствие стандартам WCAG для обеспечения доступности для людей с ограниченными возможностями
4. **Быстродействие** — минимизация времени загрузки страниц и отклика интерфейса

Ключевые элементы пользовательского интерфейса:

1. **Главная страница** — представление основных категорий товаров, акций и новинок
2. **Каталог товаров** — реализация фильтрации, сортировки и поиска товаров
3. **Карточка товара** — детальное представление информации о товаре, галерея изображений, возможность добавления в корзину
4. **Корзина** — управление выбранными товарами, расчет стоимости
5. **Оформление заказа** — форма ввода данных пользователя, выбор способа доставки и оплаты
6. **Личный кабинет** — просмотр истории заказов, управление личными данными

Прототипы ключевых экранов интерфейса представлены на рисунках 2.3-2.7.

### 2.2.5. Проектирование API

API интернет-витрины спроектировано в соответствии с принципами REST и включает следующие основные группы эндпоинтов:

**Таблица 2.3.** Основные эндпоинты API

| Группа | Эндпоинт | Метод | Описание |
|--------|----------|-------|----------|
| Товары | /api/products | GET | Получение списка товаров с возможностью фильтрации и пагинации |
| | /api/products/{id} | GET | Получение детальной информации о конкретном товаре |
| | /api/products/categories | GET | Получение списка категорий товаров |
| | /api/products/categories/{id} | GET | Получение товаров определенной категории |
| Корзина | /api/cart | GET | Получение содержимого корзины текущего пользователя |
| | /api/cart | POST | Добавление товара в корзину |
| | /api/cart/{id} | PUT | Изменение количества товара в корзине |
| | /api/cart/{id} | DELETE | Удаление товара из корзины |
| Заказы | /api/orders | POST | Создание нового заказа |
| | /api/orders | GET | Получение списка заказов пользователя |
| | /api/orders/{id} | GET | Получение детальной информации о заказе |
| Пользователи | /api/auth/register | POST | Регистрация нового пользователя |
| | /api/auth/login | POST | Аутентификация пользователя |
| | /api/auth/profile | GET | Получение профиля пользователя |
| | /api/auth/profile | PUT | Обновление профиля пользователя |

Для всех эндпоинтов определены форматы запросов и ответов, правила валидации входных данных и обработки ошибок.

## 2.3. Выбор технологий и инструментов разработки

### 2.3.1. Обоснование выбора технологического стека

Для реализации интернет-витрины мебельного магазина «Дому мебель» был выбран следующий технологический стек:

**Таблица 2.4.** Технологический стек проекта

| Компонент | Технология | Обоснование выбора |
|-----------|------------|-------------------|
| Клиентская часть | React | Популярная библиотека для создания интерактивных пользовательских интерфейсов с развитой экосистемой |
| | TypeScript | Обеспечивает типизацию, что повышает качество кода и упрощает его поддержку |
| | Redux Toolkit | Управление состоянием приложения с предсказуемым поведением |
| Серверная часть | Node.js | Асинхронная платформа, позволяющая эффективно обрабатывать множество параллельных запросов |
| | Express | Минималистичный и гибкий веб-фреймворк для Node.js |
| | TypeScript | Типизация для повышения качества и поддерживаемости кода |
| База данных | PostgreSQL | Надежная реляционная СУБД с поддержкой сложных запросов и транзакций |
| | Redis | Хранилище типа ключ-значение для кэширования и управления сессиями |
| Контейнеризация | Docker | Обеспечивает изоляцию сервисов и упрощает развертывание |
| | Docker Compose | Оркестрация контейнеров для локальной разработки |
| CI/CD | GitHub Actions | Автоматизация процессов сборки, тестирования и развертывания |
| Тестирование | Jest | Фреймворк для модульного тестирования |
| | React Testing Library | Тестирование компонентов React |
| | Cypress | E2E-тестирование пользовательского интерфейса |

### 2.3.2. Архитектура клиентского приложения

Клиентское приложение интернет-витрины реализовано по принципу Single Page Application (SPA) с использованием библиотеки React и следующей архитектурой:

1. **Архитектурный подход Feature-Sliced Design (FSD)** — организация кода по функциональным срезам:
   - entities — бизнес-сущности (Product, Category, Cart и т.д.)
   - features — пользовательские функции (фильтрация товаров, добавление в корзину и т.д.)
   - widgets — композиционные компоненты (каталог, корзина и т.д.)
   - pages — страницы приложения
   - shared — переиспользуемые компоненты и утилиты

2. **Управление состоянием** — Redux Toolkit для централизованного хранения данных с использованием:
   - slices для модульной организации хранилища
   - createAsyncThunk для асинхронных операций
   - RTK Query для кэширования и оптимизации запросов к API

3. **Маршрутизация** — React Router для навигации между страницами приложения

4. **Стилизация** — Styled Components для создания компонентов с изолированными стилями

### 2.3.3. Архитектура серверной части

Серверная часть интернет-витрины построена на основе микросервисной архитектуры с использованием следующих принципов:

1. **Модульность** — каждый микросервис отвечает за определенную бизнес-функцию и может разрабатываться, тестироваться и развертываться независимо
2. **Слоистая архитектура** каждого сервиса:
   - Controllers — обработка HTTP-запросов
   - Services — бизнес-логика
   - Repositories — работа с источниками данных
   - Models — модели данных
   - Middlewares — промежуточные обработчики запросов

3. **Коммуникация между сервисами** — REST API для синхронного взаимодействия

4. **Обработка ошибок** — унифицированный подход к обработке и логированию ошибок на всех уровнях системы

5. **Валидация данных** — централизованная валидация входных данных с использованием библиотеки Joi

## 2.4. Проектирование процессов разработки и тестирования

### 2.4.1. Методология разработки

Для разработки интернет-витрины мебельного магазина «Дому мебель» была выбрана методология Agile с элементами Scrum, включающая:

1. **Спринты продолжительностью 2 недели** с четко определенными целями и задачами
2. **Ежедневные stand-up встречи** для координации работы команды
3. **Sprint Review** для демонстрации результатов спринта и получения обратной связи
4. **Sprint Retrospective** для анализа процесса работы и выявления возможностей для улучшения

Процесс управления задачами организован с использованием Jira и включает следующие статусы:
- Backlog — задачи, ожидающие планирования
- To Do — задачи, запланированные на текущий спринт
- In Progress — задачи в процессе выполнения
- Review — задачи на проверке
- Done — завершенные задачи

### 2.4.2. Процессы обеспечения качества

Для обеспечения высокого качества разрабатываемого продукта предусмотрены следующие процессы:

1. **Код-ревью** — обязательная проверка кода перед его добавлением в основную ветку проекта
2. **Автоматизированное тестирование:**
   - Модульные тесты для проверки работы отдельных компонентов
   - Интеграционные тесты для проверки взаимодействия компонентов
   - E2E-тесты для проверки пользовательских сценариев
3. **Статический анализ кода** с использованием ESLint и TypeScript для выявления потенциальных проблем
4. **Автоматизированная сборка и тестирование** при каждом коммите с использованием GitHub Actions
5. **Мониторинг производительности** с использованием Lighthouse и WebPageTest

### 2.4.3. Процессы развертывания

Для обеспечения надежного и повторяемого процесса развертывания предусмотрены следующие этапы:

1. **Локальная разработка** — использование Docker Compose для создания локального окружения, максимально приближенного к продакшну
2. **Тестовое окружение** — автоматическое развертывание изменений из ветки develop для внутреннего тестирования
3. **Продакшн-окружение** — ручное подтверждение деплоя из ветки master после успешного прохождения всех тестов

Процесс CI/CD реализован с использованием GitHub Actions и включает следующие шаги:
1. Сборка проекта
2. Запуск тестов
3. Анализ качества кода
4. Сборка Docker-образов
5. Деплой в соответствующее окружение

## 2.5. Выводы по главе

В результате анализа предметной области и проектирования интернет-витрины мебельного магазина «Дому мебель» были сделаны следующие выводы:

1. Разработана архитектура системы, основанная на микросервисном подходе, что обеспечивает гибкость, масштабируемость и отказоустойчивость решения.

2. Спроектирована структура базы данных, учитывающая все необходимые сущности и связи между ними для реализации функциональности интернет-витрины.

3. Разработаны прототипы пользовательского интерфейса, обеспечивающие удобство использования и соответствующие современным требованиям UX/UI дизайна.

4. Определен технологический стек проекта, включающий React и TypeScript для клиентской части, Node.js и Express для серверной части, PostgreSQL для хранения данных.

5. Спроектированы процессы разработки, тестирования и развертывания, обеспечивающие высокое качество и надежность конечного продукта.

Разработанный проект архитектуры интернет-витрины мебельного магазина «Дому мебель» соответствует всем выявленным требованиям и обеспечивает необходимую функциональность для эффективной презентации товаров и взаимодействия с клиентами. 