# Глава 2. Анализ и проектирование интернет-витрины мебельного магазина «Дому мебель»

## 2.1. Анализ предметной области и существующих решений

### 2.1.1. Особенности рынка мебельной индустрии

Мебельный рынок сегодня... что тут говорить, это настоящее поле битвы. Производители буквально сражаются за внимание потребителей, которые с каждым годом становятся всё привередливее. И, честно говоря, их можно понять! Современный покупатель не хочет просто войти в магазин и купить первый попавшийся диван – ему нужно всё и сразу: детально рассмотреть товар со всех сторон, сравнить с десятком аналогов, узнать состав до последней нитки, и, разумеется, сделать это не выходя из дома.

Интересно отметить, что в последние годы тренд онлайн-покупок мебели только усиливается. Клиенты хотят видеть не просто фотографии, а детальные изображения, описания материалов, возможность «примерить» мебель в своём интерьере. Без качественной интернет-витрины в таких условиях выжить практически невозможно.

### 2.1.2. Анализ существующих решений мебельных интернет-магазинов

Прежде чем приступить к разработке собственного решения, было бы, мягко говоря, неразумно не взглянуть на то, как справляются с задачей другие игроки рынка. Проведя довольно кропотливый анализ нескольких ведущих мебельных интернет-магазинов, удалось выявить определенные закономерности:

**Таблица 2.1.** Сравнение существующих решений интернет-магазинов мебели

| Критерий | IKEA | Hoff | Аскона | Лазурит |
|----------|------|------|--------|---------|
| Наличие фильтрации по категориям | + | + | + | + |
| Детальное описание товаров | + | + | ± | + |
| Адаптивность дизайна | + | + | ± | ± |
| Скорость загрузки страниц | Высокая | Средняя | Средняя | Низкая |
| Интуитивно понятный интерфейс | + | + | ± | ± |

Любопытно, что при относительно схожем наборе функций, пользовательский опыт различается кардинально. Взять, к примеру, скорость загрузки страниц – казалось бы, технический параметр, но именно он часто становится решающим фактором. Согласитесь, мало кто готов ждать более 3 секунд, пока загрузится изображение дивана, каким бы прекрасным он ни был.

### 2.1.3. Выявление проблем и потребностей мебельного магазина «Дому мебель»

В ходе интервью с руководством и сотрудниками магазина «Дому мебель» вырисовалась довольно нетривиальная картина. Компания, обладающая превосходным ассортиментом и конкурентными ценами, оказалась практически невидимой в цифровом пространстве. Клиенты буквально не могли найти многие товары, не посетив физический магазин.

Проблема усугублялась тем, что при увеличении потока заказов менеджеры не справлялись с обработкой, что приводило к задержкам и, как следствие, к недовольству клиентов. "Мы тонем в бумажках и телефонных звонках", – эта фраза одного из менеджеров отдела продаж довольно точно иллюстрирует ситуацию.

Стало очевидно, что магазину требуется не просто сайт-визитка, а полноценная интернет-витрина с интуитивно понятным каталогом, автоматизацией обработки заказов и возможностью получения аналитических данных. Без этого дальнейшее развитие бизнеса оказывалось под угрозой.

## 2.2. Проектирование архитектуры системы

### 2.2.1. Выбор архитектурного подхода

Выбор архитектуры для проекта – это, пожалуй, одно из самых ответственных решений, которое определяет всю дальнейшую судьбу разработки. После серьезных дискуссий и взвешивания всех "за" и "против", для реализации интернет-витрины был выбран микросервисный подход.

Почему именно микросервисы, спросите вы? Да потому что в случае с «Дому мебель» нам важна не только функциональность "здесь и сейчас", но и возможность гибкого развития в будущем. Представьте, что мы создаем не просто систему, а живой организм, который будет расти и эволюционировать вместе с бизнесом.

Микросервисная архитектура позволяет нам достичь нескольких критически важных целей одновременно. Во-первых, это масштабируемость – возможность наращивать мощности именно тех компонентов, которые испытывают нагрузку, без необходимости масштабировать всю систему целиком. Во-вторых, это отказоустойчивость – если один из сервисов даст сбой, остальные продолжат работать. А в-третьих, это гибкость развития – разные команды могут одновременно работать над разными сервисами, не мешая друг другу.

### 2.2.2. Компонентная модель системы

Разработанная система включает несколько ключевых компонентов, каждый из которых играет свою уникальную роль.

На фронтенде мы имеем клиентское SPA-приложение на базе React – своеобразное "лицо" нашей системы, с которым непосредственно взаимодействует пользователь. Все запросы от этого приложения проходят через API Gateway – своего рода "швейцара", который проверяет права доступа и направляет запросы нужным микросервисам.

А сами микросервисы? Они выполняют весь основной функционал системы: от управления каталогом и корзиной до обработки заказов и аналитики. Представьте их как отдельных специалистов, каждый из которых является профессионалом в своей узкой области.

Отдельного внимания заслуживает система хранения данных. Для каждого типа данных мы используем наиболее подходящее хранилище: реляционную базу для структурированных данных и специализированное хранилище для изображений товаров. Это обеспечивает оптимальную производительность при работе с различными типами контента.

Взаимодействие всех этих компонентов через RESTful API создает систему, которая одновременно надежна, гибка и готова к масштабированию. По сути, мы создаем не просто интернет-витрину, а полноценную экосистему для развития бизнеса «Дому мебель» в цифровом пространстве.

### 2.2.3. Проектирование базы данных

Проектирование базы данных – это, если хотите, создание фундамента для всей системы. Одно неверное решение на этом этапе может привести к серьезным проблемам в будущем. Поэтому подход был максимально ответственным.

Структура базы данных включает несколько ключевых сущностей, каждая из которых тщательно продумана:

**Таблица 2.2.** Основные сущности базы данных

| Сущность | Описание | Основные атрибуты |
|----------|----------|-------------------|
| Product | Товар | id, name, description, price, discount_price, category_id, dimensions, material, color |
| Category | Категория товаров | id, name, parent_id, description, image_url |
| User | Пользователь | id, email, password_hash, first_name, last_name, phone, role |
| Order | Заказ | id, user_id, status, total_price, shipping_address, payment_method |
| CartItem | Позиция корзины | id, session_id, product_id, quantity, added_at |

Интересно отметить, что при проектировании мы столкнулись с дилеммой: как эффективно хранить информацию о товарах, учитывая их разнообразие и различные наборы характеристик. После нескольких итераций была выбрана гибридная модель, которая сочетает основные характеристики в базовой таблице и дополнительные атрибуты в связанных сущностях.

Такая архитектура базы данных обеспечивает не только эффективное хранение информации, но и высокую производительность при выполнении сложных запросов, например, многоуровневой фильтрации товаров.

### 2.2.4. Проектирование пользовательского интерфейса

В мире интернет-магазинов пользовательский интерфейс – это не просто красивая обертка, а полноценный инструмент продаж. Недаром говорят, что встречают по одежке... В нашем случае, интерфейс – это именно та "одежка", по которой клиенты будут судить о магазине в целом.

При проектировании UI/UX были учтены основные принципы современного дизайна. Прежде всего, это простота и интуитивность. Согласитесь, никто не хочет тратить время на изучение сложного интерфейса только для того, чтобы купить стул.

Адаптивность – еще один краеугольный камень. В эпоху, когда пользователи могут зайти на сайт с десятка различных устройств, иметь интерфейс, который одинаково хорошо работает на всех экранах – не роскошь, а необходимость.

Особое внимание было уделено доступности. Интерфейс должен быть удобен для всех пользователей, включая людей с ограниченными возможностями. Это не только этически правильно, но и расширяет потенциальную аудиторию магазина.

Ключевые экраны включают главную страницу с акцентом на основные категории и специальные предложения, каталог с гибкой системой фильтрации и сортировки, детальную карточку товара с галереей изображений, корзину и процесс оформления заказа, максимально упрощенный для пользователя.

### 2.2.5. Проектирование API

API – это своеобразный язык, на котором общаются различные части нашей системы. И, как в любом языке, здесь важны четкость и последовательность.

Для интернет-витрины было спроектировано RESTful API, следующее лучшим практикам отрасли. Эндпоинты логически сгруппированы по функциональным областям:

**Таблица 2.3.** Основные эндпоинты API

| Группа | Эндпоинт | Метод | Описание |
|--------|----------|-------|----------|
| Товары | /api/products | GET | Получение списка товаров с фильтрацией |
| | /api/products/{id} | GET | Детальная информация о товаре |
| Корзина | /api/cart | GET | Содержимое корзины пользователя |
| | /api/cart | POST | Добавление товара в корзину |
| Заказы | /api/orders | POST | Создание нового заказа |
| | /api/orders | GET | Список заказов пользователя |
| Пользователи | /api/auth/login | POST | Аутентификация пользователя |
| | /api/auth/profile | GET | Профиль пользователя |

При проектировании API особое внимание уделялось безопасности и производительности. Все эндпоинты проходят валидацию входных данных, а результаты запросов кэшируются там, где это возможно, для обеспечения максимальной скорости отклика.

## 2.3. Выбор технологий и инструментов разработки

### 2.3.1. Обоснование выбора технологического стека

Выбор технологий для проекта – это всегда баланс между инновационностью и стабильностью, между личными предпочтениями разработчиков и объективными требованиями проекта. В случае с интернет-витриной «Дому мебель» этот выбор был особенно ответственным, учитывая критическую важность системы для бизнеса.

В конечном итоге, для клиентской части был выбран React в сочетании с TypeScript – мощный дуэт, который обеспечивает как гибкость разработки, так и надежность кода. Добавление Redux Toolkit для управления состоянием приложения завершило клиентский стек.

На серверной стороне выбор пал на Node.js с Express – технологии, которые идеально подходят для создания высоконагруженных API с асинхронной обработкой запросов. А TypeScript и здесь добавляет типобезопасность, что критически важно при разработке микросервисной архитектуры.

Для хранения данных был выбран PostgreSQL – надежная и проверенная временем реляционная СУБД, которая идеально подходит для хранения структурированных данных о товарах, заказах и пользователях. Дополнительно для кэширования и управления сессиями используется Redis.

Контейнеризация с использованием Docker и оркестрация с помощью Docker Compose обеспечивают изоляцию сервисов и упрощают как локальную разработку, так и деплой в продакшн.

### 2.3.2. Архитектура клиентского приложения

Клиентское приложение – это то, с чем непосредственно взаимодействуют пользователи, поэтому его архитектура должна обеспечивать не только функциональность, но и отзывчивость интерфейса.

Для организации кода был выбран архитектурный подход Feature-Sliced Design (FSD), который предполагает разделение кода по функциональным срезам. Такой подход делает кодовую базу более структурированной и понятной, особенно при увеличении её размера.

Управление состоянием приложения реализовано с использованием Redux Toolkit, который значительно упрощает работу с глобальным состоянием. Особенно полезным оказался RTK Query для кэширования и оптимизации запросов к API – это заметно повышает отзывчивость интерфейса.

Для маршрутизации используется React Router, а для стилизации – Styled Components, что позволяет создавать компоненты с изолированными стилями и избегать конфликтов в CSS.

### 2.3.3. Архитектура серверной части

Серверная часть системы – это, если хотите, её "мозг и нервная система". Здесь происходит вся бизнес-логика, обработка данных и взаимодействие с внешними системами.

Микросервисная архитектура позволяет разделить функционал на независимые сервисы, каждый из которых отвечает за свою область: управление товарами, обработка корзины и заказов, аутентификация пользователей и т.д.

Внутри каждого сервиса используется слоистая архитектура с четким разделением ответственности:
- Controllers обрабатывают HTTP-запросы
- Services содержат бизнес-логику
- Repositories взаимодействуют с базой данных
- Models определяют структуру данных
- Middlewares обрабатывают запросы перед передачей их контроллерам

Такая архитектура не только упрощает разработку и тестирование, но и обеспечивает высокую гибкость системы. Каждый сервис может быть изменен или заменен независимо от других, что критически важно для долгосрочного развития проекта.

## 2.4. Проектирование процессов разработки и тестирования

### 2.4.1. Методология разработки

Выбор методологии разработки – это не просто формальность, а стратегическое решение, которое влияет на весь процесс создания продукта. Для проекта интернет-витрины «Дому мебель» была выбрана методология Agile с элементами Scrum.

И знаете что? Это решение оказалось абсолютно верным. Спринты продолжительностью 2 недели позволяют команде фокусироваться на конкретных задачах и быстро адаптироваться к изменяющимся требованиям. А ежедневные stand-up встречи обеспечивают постоянную коммуникацию и своевременное выявление проблем.

Особенно ценными оказались Sprint Review, где демонстрируются результаты спринта и собирается обратная связь, и Sprint Retrospective, где команда анализирует свою работу и ищет пути улучшения процессов.

Для управления задачами используется Jira с четко определенными статусами: Backlog, To Do, In Progress, Review и Done. Такая структура обеспечивает прозрачность процесса разработки и позволяет всем участникам команды и заинтересованным лицам видеть текущий статус проекта.

### 2.4.2. Процессы обеспечения качества

Качество кода и продукта в целом – это не то, что можно обеспечить в последний момент перед релизом. Это результат систематической работы на всех этапах разработки.

В проекте интернет-витрины «Дому мебель» были внедрены несколько уровней проверки качества. Прежде всего, это код-ревью – обязательная проверка кода другими разработчиками перед его интеграцией в основную ветку проекта.

Автоматизированное тестирование включает модульные тесты для проверки отдельных компонентов, интеграционные тесты для проверки взаимодействия компонентов и E2E-тесты для проверки пользовательских сценариев в условиях, максимально приближенных к реальным.

Дополнительно используется статический анализ кода с помощью ESLint и TypeScript, который позволяет выявить потенциальные проблемы еще до запуска кода. А автоматизированная сборка и тестирование при каждом коммите с использованием GitHub Actions обеспечивают немедленную обратную связь о качестве изменений.

### 2.4.3. Процессы развертывания

Процесс развертывания – это, пожалуй, один из самых критичных аспектов разработки. Даже идеально написанный код бесполезен, если его невозможно быстро и надежно доставить в продакшн.

Для проекта интернет-витрины был разработан многоэтапный процесс развертывания. На этапе локальной разработки используется Docker Compose для создания окружения, максимально приближенного к продакшну, что минимизирует риск проблем при деплое.

Изменения из ветки develop автоматически развертываются в тестовое окружение, где они проходят внутреннее тестирование. И только после успешного прохождения всех тестов и ручного подтверждения изменения из ветки master деплоятся в продакшн-окружение.

Весь процесс CI/CD реализован с использованием GitHub Actions и включает сборку проекта, запуск тестов, анализ качества кода, сборку Docker-образов и, наконец, деплой в соответствующее окружение.

## 2.5. Выводы по главе

Подводя итоги проделанной работы по анализу и проектированию интернет-витрины для мебельного магазина «Дому мебель», нельзя не отметить комплексность и многогранность решаемой задачи. Мы не просто создали набор диаграмм и спецификаций – мы разработали основу для системы, которая должна стать ключевым инструментом в цифровой трансформации бизнеса.

Архитектура системы, основанная на микросервисном подходе, обеспечивает не только гибкость и масштабируемость, но и отказоустойчивость решения – качества, критически важные для современного бизнеса. Спроектированная структура базы данных учитывает все необходимые сущности и связи между ними, что создает прочный фундамент для реализации функциональности интернет-витрины.

Особое внимание было уделено пользовательскому интерфейсу – ведь именно через него клиенты будут взаимодействовать с магазином. Разработанные прототипы обеспечивают не только удобство использования, но и соответствуют современным требованиям UX/UI дизайна.

Выбранный технологический стек – React и TypeScript для клиентской части, Node.js и Express для серверной части, PostgreSQL для хранения данных – это не просто набор модных технологий, а тщательно продуманное решение, каждый элемент которого имеет свое обоснование.

Спроектированные процессы разработки, тестирования и развертывания обеспечивают высокое качество и надежность конечного продукта – факторы, которые будут определяющими для успеха проекта в долгосрочной перспективе.

В итоге, разработанный проект архитектуры интернет-витрины мебельного магазина «Дому мебель» не только соответствует всем выявленным требованиям, но и закладывает прочную основу для будущего развития системы вместе с ростом бизнеса. А это, согласитесь, и есть главная цель проектирования. 