# Настройка локальной разработки

## Требования
- Node.js (версия 14 или выше)
- PostgreSQL
- pgAdmin (для управления базой данных)

## Настройка базы данных

1. Убедитесь, что у вас есть копия базы данных `online_store_riazanov-test` в pgAdmin
2. Если её нет, создайте копию рабочей базы `online_store_riazanov`:
   - Откройте pgAdmin
   - Щелкните правой кнопкой на базе `online_store_riazanov`
   - Выберите "Backup..."
   - Сохраните бэкап
   - Создайте новую базу данных `online_store_riazanov-test`
   - Восстановите бэкап в новую базу

## Настройка переменных окружения

1. Отредактируйте файл `.env` в корне проекта:
   ```
   DB_NAME=online_store_riazanov-test
   DB_USER=postgres
   DB_PASSWORD=ВАШ_ПАРОЛЬ_POSTGRES
   DB_HOST=localhost
   DB_PORT=5432
   PORT=5000
   SECRET_KEY=ВАШ_СЕКРЕТНЫЙ_КЛЮЧ
   REACT_APP_API_URL=http://localhost:5000
   ```

2. Замените:
   - `ВАШ_ПАРОЛЬ_POSTGRES` на реальный пароль от PostgreSQL
   - `ВАШ_СЕКРЕТНЫЙ_КЛЮЧ` на любую случайную строку для JWT токенов

## Установка зависимостей

### Сервер
```bash
cd server
npm install
```

### Клиент
```bash
cd client
npm install
```

## Запуск в режиме разработки

### Вариант 1: Автоматический запуск (рекомендуется)
Запустите оба файла одновременно:
- `start-server-dev.bat` - запускает сервер с тестовой базой данных
- `start-client-dev.bat` - запускает клиент

### Вариант 2: Ручной запуск

#### Сервер (терминал 1)
```bash
cd server
npm run dev:local
```

#### Клиент (терминал 2)
```bash
cd client
npm start
```

## Проверка работы

1. Сервер должен запуститься на http://localhost:5000
2. Клиент должен запуститься на http://localhost:3000
3. Клиент автоматически откроется в браузере
4. Проверьте, что данные загружаются из тестовой базы данных

## Различия между режимами

### Продакшн (npm run build)
- Использует базу данных `online_store_riazanov`
- API URL: https://domu-mebel.ru/
- Оптимизированная сборка

### Разработка (npm start)
- Использует базу данных `online_store_riazanov-test`
- API URL: http://localhost:5000
- Горячая перезагрузка
- Инструменты разработчика

## Устранение проблем

### Ошибка подключения к базе данных
- Проверьте, что PostgreSQL запущен
- Убедитесь, что база данных `online_store_riazanov-test` существует
- Проверьте правильность пароля в файле `.env`

### Ошибка CORS
- Убедитесь, что сервер запущен на порту 5000
- Проверьте, что в `client/.env` указан правильный URL: `REACT_APP_API_URL=http://localhost:5000`

### Порт уже занят
- Измените порт в файле `.env` (например, на 5001)
- Обновите `REACT_APP_API_URL` в `client/.env` соответственно 